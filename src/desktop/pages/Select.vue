<template lang="pug"> .select
  Logo
  proposed-page(to="/filter") Подбор по параметрам
  .render-info
    .render: svg(xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080" version="1.1" width="100%" height="100%" preserveAspectRatio="xMidYMid slice")
      image(xlink:href="/static/gallery/architecture/render-5(2).jpg" width="100%" height="100%")
      g(v-for="(house, literNumber) in houses")
        path(
          v-for="(storey, storeyNumber) in house"
          :d="storey"
          :class="{'hover':hover === `${literNumber}${storeyNumber}`}"
          @click="handlerPano2vrProxy('click', literNumber, storeyNumber)"
          @mouseover="handlerPano2vrProxy('mouseover', literNumber, storeyNumber)"
        )
      //iframe.render(src="/static/Pano2VR/index.html" ref="pano" @load="iframeInit")
    .info
      .info__circle: .info__circle__wrapper
        .info__circle__value {{ selectedLiterNumber }}
        .info__circle__title литер
      .info__circle: .info__circle__wrapper
        .info__circle__value {{ selectedStoreyNumber }}
        .info__circle__title этаж
      .info__circle: .info__circle__wrapper
        .info__circle__value {{ selectedLiterFreeFlats }}
        .info__circle__title квартир свободно
</template>

<script>
import ProposedPage from '../components/ProposedPage'
import Logo from '../components/Logo'
import { mapActions, mapGetters } from 'vuex'
import { show as showEntrance } from '@/api/entrances';
import { show as showStorey } from '@/api/storeys';

export default {
  components: { ProposedPage, Logo },
  data: () => ({
    hover: '',
    selectedLiterNumber: '-',
    selectedStoreyNumber: '-',
    selectedLiterFreeFlats: '-',
    storeysMap: {},
    literLabelMap: {
      '1А': 1,
      '1Б': 2,
      '1Г': 3,
    },
    houses: {
      '1Б': {
        13: 'M 216.00 368.66 C 284.67 360.54 353.35 352.45 422.02 344.32 C 425.01 344.00 427.99 344.49 430.96 344.79 C 550.95 356.85 670.95 368.88 790.94 380.95 C 790.94 393.22 790.94 405.50 790.94 417.78 C 671.26 408.13 551.59 398.47 431.92 388.83 C 428.58 388.57 425.24 388.10 421.89 388.37 C 353.26 394.51 284.63 400.60 216.01 406.72 C 215.99 394.03 216.00 381.35 216.00 368.66 Z',
        12: 'M 216.01 409.91 C 282.64 404.32 349.28 398.74 415.92 393.15 C 419.25 392.89 422.58 392.40 425.92 392.61 C 547.59 402.07 669.27 411.51 790.94 420.97 C 790.95 432.52 790.94 444.07 790.94 455.63 C 684.93 448.63 578.93 441.63 472.92 434.63 C 456.25 433.65 439.60 432.20 422.92 431.50 C 353.95 435.72 284.98 440.06 216.01 444.31 C 216.00 432.84 216.00 421.37 216.01 409.91 Z',
        11: 'M 416.01 436.45 C 419.36 436.25 422.72 435.92 426.08 436.10 C 547.70 443.84 669.32 451.58 790.93 459.31 C 790.95 470.19 790.94 481.06 790.94 491.94 C 685.95 486.68 580.95 481.42 475.96 476.17 C 458.31 475.36 440.66 474.23 423.01 473.64 C 354.01 476.99 285.01 480.45 216.01 483.85 C 215.99 472.04 215.99 460.24 216.01 448.43 C 282.68 444.45 349.35 440.44 416.01 436.45 Z',
        10: 'M 216.01 486.69 C 285.34 483.58 354.68 480.32 424.02 477.31 C 546.33 483.11 668.63 489.16 790.94 495.07 C 790.95 505.67 790.94 516.27 790.94 526.88 C 668.64 522.65 546.35 518.30 424.05 514.14 C 354.70 516.01 285.35 518.06 216.00 520.00 C 216.00 508.90 215.99 497.79 216.01 486.69 Z',
        9: 'M 382.57 520.38 C 400.71 520.14 418.86 518.84 437.01 519.75 C 554.98 523.71 672.96 527.67 790.94 531.63 C 790.94 541.75 790.94 551.88 790.94 562.01 C 668.64 559.56 546.34 557.05 424.04 554.66 C 354.70 555.68 285.35 556.85 216.00 557.90 C 216.00 546.82 215.99 535.74 216.01 524.66 C 271.53 523.22 327.05 521.81 382.57 520.38 Z',
        8: 'M 378.97 560.49 C 399.65 560.30 420.33 559.43 441.02 560.12 C 557.66 562.47 674.30 564.81 790.95 567.16 C 790.93 577.57 790.95 587.98 790.94 598.40 C 678.27 597.71 565.61 597.14 452.95 596.47 C 373.97 596.21 294.99 597.31 216.01 597.53 C 215.99 586.05 216.00 574.56 216.00 563.08 C 270.32 562.19 324.65 561.36 378.97 560.49 Z',
        7: 'M 216.01 601.92 C 273.33 601.54 330.66 601.23 387.99 600.87 C 440.99 600.41 493.99 601.11 546.99 601.20 C 628.31 601.62 709.62 601.89 790.94 602.35 C 790.94 613.69 790.94 625.04 790.94 636.39 C 684.60 637.44 578.27 638.54 471.93 639.61 C 449.28 639.76 426.63 640.32 403.98 639.86 C 341.33 639.12 278.67 638.35 216.02 637.64 C 215.98 625.74 216.00 613.83 216.01 601.92 Z',
        6: 'M 538.00 643.69 C 622.31 642.83 706.62 641.99 790.93 641.12 C 790.94 650.71 790.96 660.29 790.92 669.88 C 674.29 672.88 557.65 675.90 441.02 678.91 C 433.37 679.03 425.72 679.51 418.07 679.20 C 350.71 677.45 283.36 675.75 216.00 673.99 C 216.00 663.46 215.98 652.92 216.01 642.38 C 273.33 643.05 330.65 643.74 387.97 644.42 C 437.98 645.33 487.99 643.96 538.00 643.69 Z',
        5: 'M 441.02 683.33 C 557.66 680.20 674.30 677.07 790.94 673.94 C 790.94 683.66 790.94 693.37 790.94 703.09 C 668.62 708.94 546.32 714.95 424.00 720.69 C 354.67 717.14 285.34 713.31 216.01 709.66 C 215.99 699.25 216.00 688.85 216.01 678.45 C 283.03 680.15 350.05 681.88 417.07 683.61 C 425.06 683.96 433.04 683.48 441.02 683.33 Z',
        4: 'M 423.98 726.43 C 546.30 720.43 668.62 714.13 790.94 708.00 C 790.94 718.00 790.94 727.99 790.94 737.99 C 668.94 746.45 546.95 754.95 424.95 763.34 C 412.49 762.77 400.05 761.48 387.59 760.64 C 330.40 756.24 273.20 751.83 216.01 747.44 C 215.99 736.63 216.00 725.81 216.00 715.00 C 285.33 718.79 354.65 722.75 423.98 726.43 Z',
        3: 'M 424.95 768.28 C 546.95 760.02 668.94 751.62 790.94 743.32 C 790.94 753.45 790.95 763.58 790.94 773.72 C 669.25 784.61 547.56 795.50 425.87 806.40 C 422.54 806.63 419.23 806.08 415.93 805.80 C 349.29 799.48 282.65 793.15 216.01 786.85 C 216.00 775.49 216.00 764.14 216.01 752.79 C 271.01 756.90 326.01 761.03 381.01 765.15 C 395.66 766.14 410.29 767.56 424.95 768.28 Z',
        2: 'M 424.02 811.21 C 546.34 800.50 668.63 789.35 790.94 778.47 C 790.94 789.28 790.94 800.09 790.94 810.90 C 668.63 823.56 546.33 836.52 424.01 848.98 C 354.66 841.58 285.34 833.68 216.01 826.09 C 215.99 814.59 216.00 803.09 216.01 791.60 C 285.35 798.10 354.67 804.87 424.02 811.21 Z'
      },
      '1Г': {
        23: 'M 966.28 142.46 C 979.84 140.49 993.32 137.79 1006.92 136.16 C 1014.52 137.41 1021.90 139.81 1029.43 141.49 C 1045.25 145.39 1061.06 149.37 1076.91 153.19 C 1077.10 163.71 1076.98 174.24 1076.97 184.76 C 1056.43 180.07 1035.86 175.54 1015.33 170.84 C 1011.80 170.14 1008.26 168.79 1004.63 169.35 C 964.11 175.22 923.61 181.30 883.08 187.09 C 883.02 177.09 882.98 167.09 883.07 157.09 C 882.78 155.36 885.03 155.59 886.10 155.26 C 912.84 151.11 939.55 146.73 966.28 142.46 Z',
        22: 'M 884.01 189.00 C 924.33 183.29 964.66 177.60 1004.99 171.87 C 1006.32 171.64 1007.66 171.70 1009.00 172.05 C 1031.66 177.50 1054.32 182.92 1076.98 188.33 C 1077.02 197.83 1076.99 207.34 1077.00 216.84 C 1054.31 211.83 1031.61 206.84 1008.93 201.81 C 1005.93 201.10 1002.90 202.05 999.92 202.35 C 961.28 207.47 922.64 212.60 884.00 217.71 C 884.00 208.14 883.99 198.57 884.01 189.00 Z',
        21: 'M 1000.42 205.53 C 1003.25 205.22 1006.13 204.38 1008.99 205.08 C 1031.65 210.11 1054.33 215.11 1077.00 220.13 C 1077.00 229.63 1077.00 239.12 1077.00 248.62 C 1054.36 243.83 1031.72 239.05 1009.09 234.24 C 1006.09 233.54 1003.07 234.34 1000.08 234.63 C 961.39 239.15 922.70 243.67 884.01 248.18 C 883.99 239.11 883.99 230.04 884.01 220.97 C 922.81 215.82 961.61 210.69 1000.42 205.53 Z',
        20: 'M 884.01 251.34 C 924.39 246.71 964.77 242.08 1005.15 237.43 C 1007.93 237.08 1010.62 238.01 1013.32 238.54 C 1034.54 243.04 1055.77 247.50 1077.00 252.01 C 1077.00 260.13 1077.00 268.25 1076.99 276.37 C 1054.33 272.21 1031.66 268.06 1009.00 263.88 C 1005.99 263.30 1002.96 264.04 999.98 264.32 C 961.32 268.63 922.66 272.94 884.01 277.25 C 884.00 268.61 883.99 259.97 884.01 251.34 Z',
        19: 'M 1000.08 267.86 C 1002.94 267.60 1005.83 266.97 1008.72 267.42 C 1031.47 271.55 1054.24 275.63 1077.00 279.76 C 1076.99 287.96 1077.01 296.17 1076.99 304.38 C 1055.01 300.68 1033.04 296.99 1011.07 293.25 C 1008.06 292.45 1004.96 292.47 1001.93 293.02 C 962.63 296.76 923.31 300.45 884.01 304.21 C 883.99 296.19 883.99 288.17 884.01 280.15 C 922.70 276.06 961.39 271.96 1000.08 267.86 Z',
        18: 'M 884.01 307.52 C 923.01 303.62 962.06 300.16 1001.09 296.38 C 1004.40 296.01 1007.78 296.03 1011.09 296.57 C 1033.04 300.35 1055.05 303.81 1077.01 307.58 C 1076.99 316.53 1077.01 325.48 1077.00 334.43 C 1054.29 331.13 1031.59 327.81 1008.90 324.48 C 1004.24 324.02 999.58 324.91 994.93 325.08 C 957.92 327.51 920.97 330.74 884.00 333.78 C 884.00 325.03 883.99 316.27 884.01 307.52 Z',
        17: 'M 884.01 337.56 C 923.33 334.11 962.65 330.67 1002.01 327.69 C 1007.76 326.80 1013.43 328.42 1019.12 329.12 C 1038.41 332.00 1057.70 334.87 1076.99 337.75 C 1077.00 345.95 1077.00 354.15 1076.99 362.34 C 1055.72 359.65 1034.44 356.98 1013.17 354.26 C 1005.47 352.84 997.68 354.25 989.94 354.43 C 954.60 356.14 919.31 358.77 884.01 361.09 C 883.99 353.25 883.99 345.40 884.01 337.56 Z',
        16: 'M 884.00 364.19 C 925.01 361.51 965.96 357.88 1007.00 355.73 C 1030.26 358.49 1053.42 362.30 1076.71 364.75 C 1077.08 373.34 1076.91 381.95 1076.97 390.55 C 1058.26 388.43 1039.60 385.85 1020.86 384.17 C 1021.64 384.05 1022.44 383.94 1023.24 383.83 C 1017.10 384.02 1011.13 382.16 1005.01 382.44 C 994.31 382.50 983.68 383.80 972.98 383.74 C 964.72 384.82 956.36 384.21 948.10 385.24 C 926.75 386.57 905.40 387.97 884.05 389.43 C 883.94 381.02 884.02 372.60 884.00 364.19 Z',
        15: 'M 955.01 386.97 C 971.34 386.14 987.67 385.45 1004.00 384.63 C 1008.00 384.38 1011.96 385.08 1015.93 385.51 C 1036.28 387.80 1056.63 390.11 1076.99 392.40 C 1077.01 400.93 1077.00 409.47 1077.00 418.00 C 1061.09 416.52 1045.18 415.05 1029.28 413.57 C 1019.18 412.86 1009.11 411.02 998.96 411.72 C 979.67 412.40 960.33 412.34 941.08 413.83 C 922.05 415.08 903.03 416.35 884.00 417.59 C 883.99 409.20 884.00 400.80 884.00 392.41 C 907.67 390.59 931.34 388.75 955.01 386.97 Z',
        14: 'M 939.95 417.24 C 960.91 415.53 981.96 415.28 1002.96 414.27 C 1008.04 413.92 1013.09 414.80 1018.15 415.22 C 1037.77 417.17 1057.39 419.08 1077.00 421.04 C 1076.99 429.49 1077.00 437.95 1076.99 446.40 C 1061.03 445.06 1045.07 443.71 1029.10 442.36 C 1019.42 441.79 1009.76 440.09 1000.04 440.74 C 984.32 441.29 968.60 441.79 952.88 442.36 C 952.88 445.60 952.87 448.84 952.88 452.09 C 929.92 452.91 906.96 453.71 884.00 454.54 C 884.00 443.43 883.99 432.32 884.01 421.21 C 902.66 419.90 921.30 418.56 939.95 417.24 Z',
        13: 'M 955.12 445.13 C 971.39 444.48 987.66 443.87 1003.93 443.20 C 1007.96 443.00 1011.98 443.52 1016.01 443.85 C 1036.34 445.54 1056.66 447.23 1076.99 448.94 C 1077.00 457.71 1077.00 466.48 1076.99 475.25 C 1061.68 474.57 1046.37 473.88 1031.07 473.20 C 1020.38 472.86 1009.69 471.87 998.99 472.26 C 983.67 472.52 968.35 472.80 953.03 473.04 C 952.99 477.03 952.98 481.02 953.02 485.01 C 947.69 485.94 942.27 485.39 936.91 485.62 C 919.27 485.92 901.64 486.04 884.01 486.14 C 883.99 476.65 883.99 467.17 884.01 457.68 C 907.70 456.30 931.43 455.41 955.12 453.97 C 955.11 451.02 955.11 448.07 955.12 445.13 Z',
        12: 'M 955.12 475.20 C 972.06 475.14 989.01 475.10 1005.95 475.07 C 1029.64 475.95 1053.32 477.07 1077.00 478.03 C 1076.99 486.36 1077.00 494.69 1077.00 503.02 C 1050.00 502.39 1023.02 500.44 996.03 501.00 C 981.68 501.00 967.34 500.99 953.00 501.00 C 952.99 505.00 953.00 509.00 953.00 513.00 C 930.00 513.00 907.00 513.00 884.00 513.00 C 884.00 504.71 883.99 496.42 884.01 488.14 C 907.70 488.01 931.39 487.78 955.08 487.64 C 955.13 483.49 955.11 479.34 955.12 475.20 Z',
        11: 'M 955.09 502.94 C 972.39 502.93 989.68 502.93 1006.98 502.94 C 1030.32 503.60 1053.65 504.41 1076.99 505.13 C 1077.01 513.60 1077.00 522.07 1076.99 530.54 C 1035.66 529.93 994.33 529.92 953.00 530.00 C 952.99 534.00 953.00 538.00 953.00 542.00 C 930.00 542.00 907.00 542.00 884.00 542.00 C 884.00 533.00 884.00 524.00 884.00 515.00 C 907.64 515.00 931.29 515.00 954.93 515.00 C 954.99 510.98 955.04 506.96 955.09 502.94 Z',
        10: 'M 955.00 532.00 C 995.67 531.81 1036.33 532.28 1076.99 532.75 C 1077.01 541.82 1076.99 550.90 1077.00 559.97 C 1035.66 559.72 994.34 560.05 953.00 560.00 C 953.00 563.33 952.99 566.66 953.00 570.00 C 930.00 570.00 907.00 570.00 884.00 570.00 C 884.00 561.33 884.00 552.67 884.00 544.00 C 907.67 543.99 931.33 544.01 955.00 544.00 C 954.99 540.00 954.99 536.00 955.00 532.00 Z',
        9: 'M 954.94 562.01 C 995.63 562.11 1036.31 562.07 1077.00 562.00 C 1077.00 571.33 1077.00 580.66 1077.00 590.00 C 1035.67 589.99 994.34 589.89 953.01 589.94 C 952.99 592.66 952.99 595.38 952.99 598.11 C 930.00 598.11 907.00 597.97 884.00 598.00 C 884.00 589.33 884.00 580.67 884.00 572.00 C 907.65 571.99 931.29 572.01 954.94 572.00 C 954.93 568.66 954.94 565.33 954.94 562.01 Z',
        8: 'M 955.00 592.00 C 995.67 592.00 1036.33 592.00 1077.00 592.00 C 1076.99 600.67 1077.01 609.35 1076.99 618.02 C 1053.00 618.89 1029.02 620.07 1005.03 620.99 C 987.73 621.02 970.42 620.98 953.12 621.01 C 953.11 623.02 953.10 625.04 953.11 627.07 C 930.08 627.06 907.04 627.07 884.01 627.06 C 883.99 618.04 884.00 609.02 884.00 600.00 C 907.67 599.99 931.33 600.00 955.00 600.00 C 954.99 597.33 954.99 594.66 955.00 592.00 Z',
        7: 'M 1027.91 622.11 C 1044.28 621.70 1060.63 620.89 1077.00 620.31 C 1077.00 629.02 1077.00 637.74 1077.00 646.46 C 1060.31 647.37 1043.62 648.25 1026.93 649.15 C 1017.60 649.58 1008.28 650.41 998.94 650.20 C 983.63 650.07 968.31 650.48 953.01 649.97 C 953.00 652.03 952.98 654.10 952.99 656.18 C 930.01 656.16 907.03 656.18 884.06 656.18 C 883.93 647.12 884.03 638.06 884.00 629.00 C 907.67 628.99 931.33 629.00 955.00 629.00 C 954.99 626.97 955.00 624.95 955.01 622.94 C 979.31 622.63 1003.64 623.68 1027.91 622.11 Z',
        6: 'M 1027.00 651.14 C 1043.66 650.46 1060.33 649.80 1077.00 649.12 C 1076.94 657.93 1077.12 666.74 1076.90 675.54 C 1053.26 676.60 1029.63 678.16 1005.99 679.19 C 988.33 679.07 970.66 679.48 953.02 678.97 C 952.99 681.04 952.97 683.12 952.96 685.21 C 929.99 685.10 907.02 685.17 884.05 685.16 C 883.94 676.15 884.02 667.14 884.01 658.13 C 907.67 658.06 931.33 658.27 955.00 658.03 C 954.99 655.99 954.99 653.96 955.01 651.94 C 979.00 651.76 1003.02 652.46 1027.00 651.14 Z',
        5: 'M 1027.03 680.14 C 1043.69 679.46 1060.34 678.80 1077.00 678.12 C 1076.99 686.90 1077.01 695.69 1076.99 704.47 C 1061.34 705.31 1045.68 706.15 1030.03 706.99 C 1019.35 707.46 1008.68 708.43 997.98 708.20 C 982.99 708.07 967.99 708.48 953.01 707.97 C 952.99 710.02 952.97 712.08 952.97 714.16 C 929.99 714.05 907.01 714.13 884.04 714.10 C 883.96 705.11 884.01 696.12 884.01 687.13 C 907.67 687.06 931.33 687.27 955.00 687.03 C 954.99 684.99 954.99 682.96 955.01 680.94 C 979.02 680.76 1003.04 681.46 1027.03 680.14 Z',
        4: 'M 1005.01 709.94 C 1029.01 709.16 1053.00 708.04 1077.00 707.12 C 1076.99 715.90 1077.01 724.68 1076.99 733.47 C 1060.66 734.35 1044.33 735.22 1028.01 736.09 C 1018.33 736.53 1008.67 737.40 998.99 737.20 C 983.66 737.07 968.32 737.48 953.01 736.97 C 953.00 739.08 952.98 741.20 952.99 743.33 C 930.00 743.33 907.00 743.33 884.01 743.33 C 883.99 734.26 883.99 725.20 884.01 716.13 C 907.67 716.06 931.34 716.27 955.00 716.03 C 954.99 713.99 954.99 711.96 955.01 709.94 C 971.67 709.93 988.34 709.93 1005.01 709.94 Z',
        3: 'M1078.5 733L1004.5 740.5L953.5 738.5V746L882 744V772.5L1007 775L1078.5 764.5V733Z'
      },
      '1А': {
        14: 'M 1087.65 345.98 C 1169.43 338.97 1251.21 332.06 1332.99 325.03 C 1338.72 324.03 1344.33 325.98 1349.96 326.81 C 1408.97 337.55 1467.99 348.28 1527.00 359.04 C 1527.00 370.29 1527.01 381.55 1526.99 392.81 C 1464.63 382.70 1402.26 372.65 1339.90 362.52 C 1336.63 362.04 1333.35 362.60 1330.09 362.79 C 1249.28 368.64 1168.47 374.53 1087.65 380.37 C 1087.64 368.90 1087.64 357.44 1087.65 345.98 Z',
        13: 'M 1087.65 386.51 C 1169.45 380.23 1251.26 374.04 1333.07 367.73 C 1339.50 366.81 1345.80 368.95 1352.15 369.72 C 1410.40 379.28 1468.62 389.06 1526.89 398.50 C 1527.13 408.83 1526.93 419.16 1527.00 429.50 C 1464.01 421.50 1401.04 413.23 1338.04 405.39 C 1254.57 409.91 1171.12 414.93 1087.65 419.62 C 1087.64 408.58 1087.65 397.55 1087.65 386.51 Z',
        12: 'M 1327.06 410.67 C 1331.35 410.52 1335.64 409.84 1339.94 410.28 C 1402.29 418.27 1464.64 426.24 1526.99 434.21 C 1527.00 444.09 1527.00 453.97 1526.99 463.84 C 1466.03 457.26 1405.07 450.72 1344.11 444.12 C 1336.40 442.91 1328.62 444.09 1320.89 444.23 C 1243.14 447.69 1165.40 451.17 1087.65 454.62 C 1087.64 444.64 1087.64 434.67 1087.65 424.69 C 1167.46 420.01 1247.26 415.34 1327.06 410.67 Z',
        11: 'M 1087.65 460.36 C 1168.78 456.51 1249.91 452.72 1331.04 448.88 C 1339.41 448.02 1347.71 449.85 1356.03 450.54 C 1413.01 456.79 1470.00 463.04 1526.99 469.28 C 1527.01 479.05 1527.00 488.82 1527.00 498.59 C 1474.01 494.57 1421.03 490.55 1368.04 486.53 C 1357.69 485.85 1347.37 484.77 1337.01 484.31 C 1253.89 487.20 1170.77 490.23 1087.65 493.15 C 1087.63 482.22 1087.65 471.29 1087.65 460.36 Z',
        10: 'M 1087.65 498.01 C 1168.76 495.09 1249.87 492.22 1330.98 489.31 C 1339.99 488.67 1348.97 490.08 1357.96 490.58 C 1414.30 494.85 1470.64 499.13 1526.99 503.40 C 1527.01 513.27 1526.99 523.15 1527.00 533.02 C 1472.95 530.22 1418.91 527.38 1364.86 524.56 C 1353.10 524.14 1341.35 522.82 1329.57 523.37 C 1248.93 525.43 1168.29 527.47 1087.65 529.53 C 1087.64 519.02 1087.65 508.52 1087.65 498.01 Z',
        9: 'M 1331.31 527.48 C 1339.91 527.05 1348.49 528.03 1357.07 528.38 C 1413.71 531.53 1470.35 534.66 1526.99 537.82 C 1526.99 547.49 1527.01 557.15 1526.98 566.82 C 1470.66 565.85 1414.33 564.92 1358.00 563.96 C 1336.01 563.37 1314.02 563.88 1292.02 563.98 C 1223.90 564.50 1155.78 565.00 1087.65 565.54 C 1087.64 554.93 1087.64 544.31 1087.65 533.70 C 1168.87 531.61 1250.09 529.56 1331.31 527.48 Z',
        8: 'M 1087.65 569.75 C 1164.78 569.09 1241.91 568.57 1319.03 567.96 C 1340.22 567.58 1361.40 568.29 1382.58 568.57 C 1430.72 569.39 1478.86 570.17 1527.00 571.02 C 1526.99 581.10 1527.01 591.18 1526.99 601.26 C 1469.67 601.32 1412.35 601.46 1355.04 601.53 C 1265.91 601.47 1176.78 601.13 1087.65 600.93 C 1087.64 590.54 1087.64 580.14 1087.65 569.75 Z',
        7: 'M 1087.65 605.41 C 1190.09 605.53 1292.54 606.22 1394.99 605.86 C 1438.99 605.67 1482.99 605.58 1526.99 605.40 C 1527.01 615.05 1526.99 624.71 1527.00 634.38 C 1464.00 636.17 1401.00 638.03 1337.99 639.79 C 1254.55 638.80 1171.11 637.65 1087.66 636.64 C 1087.62 626.23 1087.65 615.82 1087.65 605.41 Z',
        6: 'M 1395.06 642.98 C 1439.04 641.50 1483.02 640.02 1527.00 638.53 C 1527.00 648.19 1527.00 657.86 1527.00 667.53 C 1470.35 670.98 1413.71 674.40 1357.06 677.84 C 1348.35 678.23 1339.65 679.31 1330.92 678.83 C 1249.83 676.75 1168.74 674.69 1087.65 672.63 C 1087.64 662.10 1087.64 651.58 1087.65 641.06 C 1164.75 642.26 1241.85 643.43 1318.94 644.61 C 1344.33 645.39 1369.69 643.58 1395.06 642.98 Z',
        5: 'M 1359.96 682.31 C 1415.64 678.75 1471.32 675.18 1526.99 671.63 C 1527.00 681.50 1527.00 691.38 1526.99 701.25 C 1466.63 706.23 1406.26 711.21 1345.90 716.19 C 1335.29 717.45 1324.63 716.08 1314.00 715.93 C 1238.55 713.05 1163.10 710.20 1087.65 707.30 C 1087.64 697.11 1087.64 686.91 1087.66 676.72 C 1168.56 678.98 1249.46 681.24 1330.36 683.51 C 1340.24 684.07 1350.10 682.78 1359.96 682.31 Z',
        4: 'M 1356.92 720.31 C 1413.61 715.33 1470.30 710.35 1527.00 705.38 C 1527.00 715.37 1527.00 725.35 1526.99 735.34 C 1464.72 742.81 1402.43 750.24 1340.16 757.71 C 1336.99 758.07 1333.81 757.74 1330.66 757.57 C 1249.65 753.12 1168.65 748.70 1087.65 744.24 C 1087.64 733.42 1087.64 722.59 1087.65 711.76 C 1168.75 715.05 1249.84 718.37 1330.94 721.69 C 1339.63 722.41 1348.27 720.87 1356.92 720.31 Z',
        3: 'M 1340.10 761.84 C 1402.40 754.27 1464.69 746.72 1526.99 739.16 C 1527.00 748.40 1527.00 757.64 1527.00 766.88 C 1465.62 776.71 1404.25 786.50 1342.88 796.36 C 1336.65 797.76 1330.32 796.36 1324.05 796.15 C 1245.25 790.64 1166.44 785.15 1087.64 779.61 C 1087.65 769.21 1087.64 758.81 1087.65 748.41 C 1168.13 752.79 1248.60 757.22 1329.08 761.61 C 1332.74 761.76 1336.42 762.24 1340.10 761.84 Z',
        2: 'M1337 797L1086 788.5V817.5L1337 828L1526.5 811V781L1337 797Z'
      }
    }
  }),
  computed: {
    ...mapGetters({litersNumber: 'filter/litersNumber', originalResult: 'filter/originalResult'}),
    ...mapGetters('filter', { housesMap: 'houses' })
  },
  mounted () {
    // this.iframeInit()
    if (this.$refs.pano) {
      this.$refs.pano.contentWindow.handlerPano2vrProxy = this.handlerPano2vrProxy
    }
  },
  async created() {
    await Promise.all(Object.keys(this.housesMap).map(this.getEntrance));
    this.loaderHide();
  },
  methods: {
    ...mapActions({getHouse: 'house/getHouse', getData: 'filter/getData'}),
    // async iframeInit () {
    //   await this.getData()
    //   this.loaderHide()
    // },
    async getEntrance(houseId) {
      const { data: { data } } = await showEntrance(houseId);
      this.$set(this.storeysMap, houseId, data.storeys)
    },
    getStoreyId(literLabel, storeyNumber) {
      const houseId = this.literLabelMap[literLabel];
      const storyes = this.storeysMap[houseId];
      return storyes[storeyNumber];
    },
    // getLiterStoreyFree (literNumber, storeyNumber) {
    //   return this.originalResult.filter(flat =>
    //     flat.liter === literNumber &&
    //     flat.storey_number === Number(storeyNumber) &&
    //     flat.status === 'free'
    //   ).length
    // },
    handlerPano2vrProxy (eventName, literNumber, storeyNumber) {
      switch (eventName) {
        case 'click':
          this.$router.push({
            path: '/select/' + this.getStoreyId(literNumber, storeyNumber),
            query: { houseId: this.literLabelMap[literNumber] }
          });
          break
        case 'mouseover':
          this.hover = `${literNumber}${storeyNumber}`
          this.selectedLiterNumber = literNumber;
          this.selectedStoreyNumber = storeyNumber;
          const houseId = this.literLabelMap[literNumber];
          const storey = this.storeysMap[houseId];
          this.getStorey(storey[storeyNumber]);
          break
        case 'mouseout':
          break
      }
    },
    async getStorey(id) {
      try {
        const { data: { data } } = await showStorey(id);
        this.selectedLiterFreeFlats = data.flats_counters.free;
      } catch(e) {
        alert('Не удалось получить информацию о доступных квартирах')
      }
    }
  }
}
</script>

<style scoped lang="stylus">
.info
  size 100%
  color #fff
  min-width 300px
  flex-basis 300px
  padding 240px 80px 0 50px
  @media(max-height 860px)
   min-width auto
  +below(1700px)
    min-width 220px
    flex-basis 220px
    padding 240px 35px 0 30px
  @media(max-height 800px)
    padding-top 200px
  &__circle
    width 100%
    line-height 1
    position relative
    +below(1290px)
      max-width 130px
      margin-left auto
    &:before
      content ''
      display block
      padding-top 100%
    &__wrapper
      size 100%
      display flex
      user-select none
      align-items center
      border-radius 300px
      flex-direction column
      absolute left 0 top 0
      justify-content center
      border 2px solid transparent
      background-origin border-box
      background-clip content-box, border-box
      background-image linear-gradient(#1f252f, #1f252f), linear-gradient(to top, #764419, #f5ab6c)
    &__value
      font-weight 700
      font-size rem(60px)
      font-family 'Heading Pro Wide'
      +below(1290px)
        font-size rem(48px)
    &__title
      font-size rem(14px)
      +below(1290px)
        font-size rem(12px)
.proposed-page
  z-index 1
  width fit-content
  white-space nowrap
  absolute top 25px right 325px
  @media(max-height 860px)
    right 300px
  +below(1700px)
    right 245px
.select
  size 100% 100vh
.render-info
  size 100%
  display flex
  absolute left 0 top 0
  background-color #1f252f
.render
  border 0
  height 100vh
  flex-basis 100%
  position relative
  path
    cursor pointer
    fill rgba(246, 172, 109, 0)
    transition fill .15s ease-in-out
    &.hover
      fill rgba(246, 172, 109, .63)
  &:after
    content ''
    size 100% 150px
    absolute left 0 bottom 0
    background-image linear-gradient(0deg, rgba(0,0,0,.65) 0%, rgba(0,0,0,0) 100%)
</style>
